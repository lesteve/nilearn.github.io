
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Nilearn: Machine learning for NeuroImaging in Python &mdash; Machine learning for NeuroImaging</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.4.post1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Machine learning for NeuroImaging" href="../user_guide.html" />
    <link rel="up" title="5. Advanced usage: manual pipelines and scaling up" href="index.html" />
    <link rel="next" title="6. Reference documentation: all nilearn functions" href="../modules/reference.html" />
    <link rel="prev" title="5. Advanced usage: manual pipelines and scaling up" href="index.html" />
<meta content="True" name="HandheldFriendly">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="keywords" content="nilearn, neuroimaging, python, neuroscience, machinelearning">
<script type="text/javascript">
$(function () {
    // Lock the table of content to a fixed position once we scroll enough
    var top = 105 + $('.sphinxsidebarwrapper').offset().top - parseFloat($('.sphinxsidebarwrapper').css('margin-top').replace(/auto/, 0)),
        sections = {},
        i        = 0,
	url	 = document.URL.replace(/#.*$/, ""),
	current_section = 0;

    // Grab positions of our sections 
    $('.headerlink').each(function(){
        sections[this.href.replace(url, '')] = $(this).offset().top - 50;
    });

    $(window).scroll(function(event) {
	var pos   = $(window).scrollTop();
	// Lock the table of content to a fixed position once we scroll enough
	if(pos > top){
	    //begin to scroll
	    $('.sphinxsidebarwrapper').css("position", "fixed");
	    $('.sphinxsidebarwrapper').css("top", -105);
	}
	else{
	    //lock it back into place
	    $('.sphinxsidebarwrapper').css("position", "relative");
	    $('.sphinxsidebarwrapper').css("top",0);
	}
            
	// Highlight the current section
	$('a.internal').removeClass('active');
        for(i in sections){
            if(sections[i] > pos){
		break;
            };
	    if($('a.internal[href$="' + i + '"]').is(':visible')){
		current_section = i;
	    };
        }
	$('a.internal[href$="' + current_section + '"]').addClass('active');
    });

});
</script>


<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-41920728-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

  </head>
  <body role="document">
<div id="logo-banner">
  <div class="logo">
    <a href="../index.html">
      <img src="../_static/nilearn-logo.png" alt="Nilearn logo"  border="0" />
    </a>
  </div>
  <!-- A tag cloud to make it easy for people to find what they are
                         looking for -->
 <div class="tags">
  <ul>
    <li>
      <big><a href="../auto_examples/plot_haxby_anova_svm.html">SVM</a></big>
    </li>
    <li>
      <small><a href="../data_analysis/parcellating.html">Ward
          clustering</a></small>
    </li>
    <li>
      <a href="haxby_searchlight.html">Searchlight</a>
    </li>
    <li>
      <big><a href="../data_analysis/resting_state_networks.html">ICA</a></big>
    </li>
    <li>
      <a href="data_preparation.html">Nifti IO</a>
    </li>
    <li>
      <a href="../modules/reference.html#module-nilearn.datasets">Datasets</a>
    </li>
  </ul>
 </div>

  <div class="banner">
    <h1>Nilearn:</h1>
    <h2>Machine learning for Neuro-Imaging in Python</h2>
  </div>
  <div class="search_form">
    <div id="cse" style="width: 100%;"></div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function() {
      var customSearchControl = new google.search.CustomSearchControl('014136483057745874622:r-npolb1uki');
      customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
      var options = new google.search.DrawOptions();
      options.setAutoComplete(true);
      customSearchControl.draw('cse', options);
      }, true);
    </script>
  </div>
</div>



    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../modules/reference.html" title="6. Reference documentation: all nilearn functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="5. Advanced usage: manual pipelines and scaling up"
             accesskey="P">previous</a> |</li>
<li><a href="../index.html">Nilearn Home</a> |&nbsp;</li>
<li><a href="../user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="../auto_examples/index.html">Examples</a> |&nbsp;</li>
<li><a href="../modules/reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="../AUTHORS.html">About</a>|&nbsp;</li>
<li id="navbar-ecosystem"><a href="http://www.nipy.org/">Nipy ecosystem</a></li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">5. Advanced usage: manual pipelines and scaling up</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Giving credit </h4>
  <ul class="simple">
    <li><p>Please consider <a href="../AUTHORS.html#citing">citing the
                    scikit-learn</a> if you use it.</p></li>
  </ul>

  <h3><a href="../user_guide.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.1. Building your own neuroimaging machine-learning pipeline</a><ul>
<li><a class="reference internal" href="#data-loading-and-preprocessing">5.1.1. Data loading and preprocessing</a><ul>
<li><a class="reference internal" href="#downloading-the-data">5.1.1.1. Downloading the data</a></li>
<li><a class="reference internal" href="#loading-non-image-data-experiment-description">5.1.1.2. Loading non image data: experiment description</a></li>
<li><a class="reference internal" href="#masking-the-data-from-4d-image-to-2d-array">5.1.1.3. Masking the data: from 4D image to 2D array</a><ul>
<li><a class="reference internal" href="#applying-a-mask">5.1.1.3.1. Applying a mask</a></li>
<li><a class="reference internal" href="#automatically-computing-a-mask">5.1.1.3.2. Automatically computing a mask</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#applying-a-scikit-learn-machine-learning-method">5.1.2. Applying a scikit-learn machine learning method</a></li>
<li><a class="reference internal" href="#unmasking-inverse-transform">5.1.3. Unmasking (inverse_transform)</a></li>
<li><a class="reference internal" href="#visualizing-results">5.1.4. Visualizing results</a></li>
<li><a class="reference internal" href="#going-further">5.1.5. Going further</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">5. Advanced usage: manual pipelines and scaling up</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../modules/reference.html"
                        title="next chapter">6. Reference documentation: all nilearn functions</a></p>

<div class="navbar">
</div> <!-- end navbar -->

<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="building-your-own-neuroimaging-machine-learning-pipeline">
<span id="manual-pipeline"></span><h1>5.1. Building your own neuroimaging machine-learning pipeline<a class="headerlink" href="#building-your-own-neuroimaging-machine-learning-pipeline" title="Permalink to this headline">Â¶</a></h1>
<p>Nilearn comes with code to simplify the use of scikit-learn when dealing
with neuroimaging data. For the moment, nilearn is focused on functional MRI
data.</p>
<p>Before using a machine learning tool, we may need to apply the following
steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference internal" href="#data-loading"><span>Data loading and preprocessing</span></a> : load Nifti files and check consistency of data</li>
<li><a class="reference internal" href="#masking"><span>Masking data</span></a> : if a mask is not provided, one is
computed automatically</li>
<li><a class="reference internal" href="../manipulating_visualizing/data_preparation.html#resampling"><span>Resampling</span></a>: optionally data could be resampled to a
different resolution</li>
<li><a class="reference internal" href="../manipulating_visualizing/data_preparation.html#temporal-filtering"><span>Temporal Filtering</span></a>: detrending, regressing out confounds,
normalization</li>
</ol>
</div></blockquote>
<div class="section" id="data-loading-and-preprocessing">
<span id="data-loading"></span><h2>5.1.1. Data loading and preprocessing<a class="headerlink" href="#data-loading-and-preprocessing" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="downloading-the-data">
<h3>5.1.1.1. Downloading the data<a class="headerlink" href="#downloading-the-data" title="Permalink to this headline">Â¶</a></h3>
<p>To run demos, data are retrieved using a function provided by nilearn
which downloads a dataset and returns a bunch of paths to the dataset
files (more details in <a class="reference internal" href="../manipulating_visualizing/manipulating_images.html#loading-data"><span>Loading data</span></a>). We can then proceed
loading them as if they were just any other files on our disk. For
example, we can download the data from the
<a class="reference external" href="http://dx.doi.org/10.1126/science.1063736">Haxby 2001 paper</a></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nilearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">fetch_haxby</span><span class="p">()</span>
</pre></div>
</div>
<p><cite>dataset.func</cite> contains filenames referring to dataset files on the disk:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;mask_house_little&#39;, &#39;anat&#39;, &#39;mask_house&#39;, &#39;mask_face&#39;, &#39;func&#39;, &#39;session_target&#39;, &#39;mask_vt&#39;, &#39;mask_face_little&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">func</span> 
<span class="go">[&#39;.../haxby2001/subj1/bold.nii.gz&#39;]</span>
</pre></div>
</div>
<p>Access supplementary information on the dataset:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">haxby_dataset</span><span class="p">[</span><span class="s">&#39;description&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The complete list of the data-downloading functions can be found in the
<a class="reference internal" href="../modules/reference.html#datasets-ref"><span>reference documentation for the datasets</span></a>.</p>
</div>
<div class="section" id="loading-non-image-data-experiment-description">
<h3>5.1.1.2. Loading non image data: experiment description<a class="headerlink" href="#loading-non-image-data-experiment-description" title="Permalink to this headline">Â¶</a></h3>
<p>An experiment may need additional information about subjects, sessions or
experiments. In the Haxby experiment, fMRI data are acquired while
presenting different category of pictures to the subject (face, cat, ...)
and the goal of this experiment is to predict which category is presented
to the subjects from the brain activation.</p>
<p>These conditions are presented as string into a CSV file. The numpy function
<cite>recfromcsv</cite> is very useful to load this kind of data.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="c"># Load target information as string and give a numerical identifier to each</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">recfromcsv</span><span class="p">(</span><span class="n">haxby_dataset</span><span class="o">.</span><span class="n">session_target</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&quot; &quot;</span><span class="p">)</span>

<span class="c"># scikit-learn &gt;= 0.14 supports text labels. You can replace this line by:</span>
<span class="c"># target = labels[&#39;labels&#39;]</span>
<span class="n">_</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">],</span> <span class="n">return_inverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>For example, we will now remove the <em>rest</em> condition from our dataset.
This can be done as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">condition_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="s">&#39;face&#39;</span><span class="p">,</span>
                               <span class="n">labels</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="s">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">target</span><span class="p">[</span><span class="n">condition_mask</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are not comfortable with this kind of data processing, do not
worry: there are plenty of examples in nilearn that allows you to easily
load data from provided datasets. Do not hesitate to copy/paste the
code and adapt it to your own data format if needed. More information
can be found in the <a class="reference internal" href="../manipulating_visualizing/manipulating_images.html#data-manipulation"><span>data manipulation</span></a>
section.</p>
</div>
</div>
<div class="section" id="masking-the-data-from-4d-image-to-2d-array">
<span id="masking"></span><h3>5.1.1.3. Masking the data: from 4D image to 2D array<a class="headerlink" href="#masking-the-data-from-4d-image-to-2d-array" title="Permalink to this headline">Â¶</a></h3>
<p>While functional neuroimaging data consist in 4D images, positioned in a
coordinate space (which we will call <a class="reference internal" href="../manipulating_visualizing/manipulating_images.html#niimg"><span>Niimgs</span></a>). For use with
the scikit-learn, they need to be converted into 2D arrays of
samples and features.</p>
<p class="centered">
<strong><a class="reference internal" href="../_images/niimgs.jpg"><img alt="niimgs" src="../_images/niimgs.jpg" style="width: 367.0px; height: 163.5px;" /></a>  <span style="padding: .5em; font-size: 400%">&rarr;</span>  <a class="reference internal" href="../_images/feature_array.jpg"><img alt="arrays" src="../_images/feature_array.jpg" style="width: 115.15px; height: 167.3px;" /></a></strong></p><p>We use masking to convert 4D data (i.e. 3D volume over time) into 2D data
(i.e. voxels over time). For this purpose, we use the
<a class="reference internal" href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="nilearn.input_data.NiftiMasker"><code class="xref py py-class docutils literal"><span class="pre">NiftiMasker</span></code></a> object, a very powerful data loading tool.</p>
<div class="section" id="applying-a-mask">
<h4>5.1.1.3.1. Applying a mask<a class="headerlink" href="#applying-a-mask" title="Permalink to this headline">Â¶</a></h4>
<div class="figure align-right">
<a class="reference external image-reference" href="../auto_examples/plot_haxby_simple.html"><img alt="../_images/plot_haxby_simple_0021.png" src="../_images/plot_haxby_simple_0021.png" style="width: 132.0px; height: 78.0px;" /></a>
</div>
<p>If your dataset provides a mask, the <a class="reference internal" href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="nilearn.input_data.NiftiMasker"><code class="xref py py-class docutils literal"><span class="pre">NiftiMasker</span></code></a> can apply it
automatically. All you have to do is to pass your mask as a parameter when
creating your masker. Here we use the mask of the ventral stream,
provided with the Haxby dataset.</p>
<p>The <a class="reference internal" href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="nilearn.input_data.NiftiMasker"><code class="xref py py-class docutils literal"><span class="pre">NiftiMasker</span></code></a> can be seen as a <em>tube</em> that transforms data
from 4D images to 2D arrays, but first it needs to &#8216;fit&#8217; this data in
order to learn simple parameters from it, such as its shape:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">nilearn.input_data</span> <span class="kn">import</span> <span class="n">NiftiMasker</span>
<span class="n">mask_filename</span> <span class="o">=</span> <span class="n">haxby_dataset</span><span class="o">.</span><span class="n">mask_vt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c"># For decoding, standardizing is often very important</span>
<span class="n">nifti_masker</span> <span class="o">=</span> <span class="n">NiftiMasker</span><span class="p">(</span><span class="n">mask_img</span><span class="o">=</span><span class="n">mask_filename</span><span class="p">,</span> <span class="n">standardize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">func_filename</span> <span class="o">=</span> <span class="n">haxby_dataset</span><span class="o">.</span><span class="n">func</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c"># We give the nifti_masker a filename and retrieve a 2D array ready</span>
<span class="c"># for machine learning with scikit-learn</span>
<span class="n">fmri_masked</span> <span class="o">=</span> <span class="n">nifti_masker</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">func_filename</span><span class="p">)</span>

<span class="c"># Restrict the classification to the face vs cat discrimination</span>
<span class="n">fmri_masked</span> <span class="o">=</span> <span class="n">fmri_masked</span><span class="p">[</span><span class="n">condition_mask</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that you can call <cite>nifti_masker.transform(dataset.func[1])</cite> on new
data to mask it in a similar way as the data that was used during the
fit.</p>
</div>
<div class="section" id="automatically-computing-a-mask">
<h4>5.1.1.3.2. Automatically computing a mask<a class="headerlink" href="#automatically-computing-a-mask" title="Permalink to this headline">Â¶</a></h4>
<p>If your dataset does not provide a mask, the Nifti masker will compute
one for you in the <cite>fit</cite> step. The generated mask can be accessed via the
<cite>mask_img_</cite> attribute.</p>
<p>Detailed information on automatic mask computation can be found in:
<a class="reference internal" href="../manipulating_visualizing/data_preparation.html#extracting-data"><span>Data preparation: loading and basic transformation</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="applying-a-scikit-learn-machine-learning-method">
<h2>5.1.2. Applying a scikit-learn machine learning method<a class="headerlink" href="#applying-a-scikit-learn-machine-learning-method" title="Permalink to this headline">Â¶</a></h2>
<p>Now that we have a 2D array, we can apply any estimator from the
scikit-learn, using its <cite>fit</cite>, <cite>predict</cite> or <cite>transform</cite> methods.</p>
<p>Here, we use scikit-learn Support Vector Classification to learn how to
predict the category of picture seen by the subject:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Here we use a Support Vector Classification, with a linear kernel</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="n">svc</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>

<span class="c"># And we run it</span>
<span class="n">svc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
<span class="n">prediction</span> <span class="o">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">fmri_masked</span><span class="p">)</span>
</pre></div>
</div>
<p>We will not detail it here since there is a very good documentation about it in the
<a class="reference external" href="http://scikit-learn.org/stable/modules/svm.html#classification">scikit-learn documentation</a></p>
</div>
<div class="section" id="unmasking-inverse-transform">
<h2>5.1.3. Unmasking (inverse_transform)<a class="headerlink" href="#unmasking-inverse-transform" title="Permalink to this headline">Â¶</a></h2>
<p>Unmasking data is as easy as masking it! This can be done by using
method <cite>inverse_transform</cite> on your processed data. As you may want to
unmask several kinds of data (not only the data that you previously
masked but also the results of an algorithm), the masker is clever and
can take data of dimension 1D (resp. 2D) to convert it back to 3D
(resp. 4D).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Retrieve the SVC discriminating weights</span>
<span class="n">coef_</span> <span class="o">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">coef_</span>

<span class="c"># Reverse masking thanks to the Nifti Masker</span>
<span class="n">coef_img</span> <span class="o">=</span> <span class="n">nifti_masker</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">coef_</span><span class="p">)</span>

<span class="c"># Save the coefficients as a Nifti image</span>
<span class="n">coef_img</span><span class="o">.</span><span class="n">to_filename</span><span class="p">(</span><span class="s">&#39;haxby_svc_weights.nii&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we want to see the discriminating weights of some voxels.</p>
</div>
<div class="section" id="visualizing-results">
<h2>5.1.4. Visualizing results<a class="headerlink" href="#visualizing-results" title="Permalink to this headline">Â¶</a></h2>
<p>Again the visualization code is simple. We can use an fMRI slice as a
background and plot the weights. Brighter points have a higher
discriminating weight.</p>
<div class="figure align-right">
<a class="reference external image-reference" href="../auto_examples/plot_haxby_simple.html"><img alt="../_images/plot_haxby_simple_0011.png" src="../_images/plot_haxby_simple_0011.png" style="width: 255.0px; height: 130.0px;" /></a>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">nilearn.image.image</span> <span class="kn">import</span> <span class="n">mean_img</span>
<span class="kn">from</span> <span class="nn">nilearn.plotting</span> <span class="kn">import</span> <span class="n">plot_roi</span><span class="p">,</span> <span class="n">plot_stat_map</span>

<span class="n">mean_epi</span> <span class="o">=</span> <span class="n">mean_img</span><span class="p">(</span><span class="n">func_filename</span><span class="p">)</span>
<span class="n">plot_stat_map</span><span class="p">(</span><span class="n">coef_img</span><span class="p">,</span> <span class="n">mean_epi</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;SVM weights&quot;</span><span class="p">,</span> <span class="n">display_mode</span><span class="o">=</span><span class="s">&quot;yx&quot;</span><span class="p">)</span>

<span class="n">plot_roi</span><span class="p">(</span><span class="n">nifti_masker</span><span class="o">.</span><span class="n">mask_img_</span><span class="p">,</span> <span class="n">mean_epi</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Mask&quot;</span><span class="p">,</span> <span class="n">display_mode</span><span class="o">=</span><span class="s">&quot;yx&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="going-further">
<h2>5.1.5. Going further<a class="headerlink" href="#going-further" title="Permalink to this headline">Â¶</a></h2>
<p>The <a class="reference internal" href="../modules/generated/nilearn.input_data.NiftiMasker.html#nilearn.input_data.NiftiMasker" title="nilearn.input_data.NiftiMasker"><code class="xref py py-class docutils literal"><span class="pre">NiftiMasker</span></code></a> is a very powerful object and we have only
scratched the surface of its possibilities. It is described in more
details in the section <a class="reference internal" href="../manipulating_visualizing/data_preparation.html#nifti-masker"><span>NiftiMasker: loading, masking and filtering</span></a>. Also, simple functions that
can be used to perform elementary operations such as masking or filtering
are described in <a class="reference internal" href="../manipulating_visualizing/manipulating_images.html#preprocessing-functions"><span>Functions for data preparation steps</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="../modules/reference.html" title="6. Reference documentation: all nilearn functions"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="5. Advanced usage: manual pipelines and scaling up"
             >previous</a> |</li>
<li><a href="../index.html">Nilearn Home</a> |&nbsp;</li>
<li><a href="../user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="../auto_examples/index.html">Examples</a> |&nbsp;</li>
<li><a href="../modules/reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="../AUTHORS.html">About</a>|&nbsp;</li>
<li id="navbar-ecosystem"><a href="http://www.nipy.org/">Nipy ecosystem</a></li>

          <li class="nav-item nav-item-1"><a href="index.html" >5. Advanced usage: manual pipelines and scaling up</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
            &copy; The nilearn developers 2010-2015.
          Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
        <span style="padding-left: 5ex;">
          <a href="../_sources/building_blocks/manual_pipeline.txt"
        	 rel="nofollow">Show this page source</a>
        </span>
    </div>
  </body>
</html>