
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Nilearn: Machine learning for NeuroImaging in Python &mdash; Machine learning for NeuroImaging</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.4.post1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Machine learning for NeuroImaging" href="user_guide.html" />
    <link rel="next" title="2. Decoding and MVPA: predicting from brain images" href="decoding/index.html" />
    <link rel="prev" title="User guide: table of contents" href="user_guide.html" />
<meta content="True" name="HandheldFriendly">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="keywords" content="nilearn, neuroimaging, python, neuroscience, machinelearning">
<script type="text/javascript">
$(function () {
    // Lock the table of content to a fixed position once we scroll enough
    var top = 105 + $('.sphinxsidebarwrapper').offset().top - parseFloat($('.sphinxsidebarwrapper').css('margin-top').replace(/auto/, 0)),
        sections = {},
        i        = 0,
	url	 = document.URL.replace(/#.*$/, ""),
	current_section = 0;

    // Grab positions of our sections 
    $('.headerlink').each(function(){
        sections[this.href.replace(url, '')] = $(this).offset().top - 50;
    });

    $(window).scroll(function(event) {
	var pos   = $(window).scrollTop();
	// Lock the table of content to a fixed position once we scroll enough
	if(pos > top){
	    //begin to scroll
	    $('.sphinxsidebarwrapper').css("position", "fixed");
	    $('.sphinxsidebarwrapper').css("top", -105);
	}
	else{
	    //lock it back into place
	    $('.sphinxsidebarwrapper').css("position", "relative");
	    $('.sphinxsidebarwrapper').css("top",0);
	}
            
	// Highlight the current section
	$('a.internal').removeClass('active');
        for(i in sections){
            if(sections[i] > pos){
		break;
            };
	    if($('a.internal[href$="' + i + '"]').is(':visible')){
		current_section = i;
	    };
        }
	$('a.internal[href$="' + current_section + '"]').addClass('active');
    });

});
</script>


<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-41920728-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

  </head>
  <body role="document">
<div id="logo-banner">
  <div class="logo">
    <a href="index.html">
      <img src="_static/nilearn-logo.png" alt="Nilearn logo"  border="0" />
    </a>
  </div>
  <!-- A tag cloud to make it easy for people to find what they are
                         looking for -->
 <div class="tags">
  <ul>
    <li>
      <big><a href="auto_examples/plot_haxby_anova_svm.html">SVM</a></big>
    </li>
    <li>
      <small><a href="data_analysis/parcellating.html">Ward
          clustering</a></small>
    </li>
    <li>
      <a href="building_blocks/haxby_searchlight.html">Searchlight</a>
    </li>
    <li>
      <big><a href="data_analysis/resting_state_networks.html">ICA</a></big>
    </li>
    <li>
      <a href="building_blocks/data_preparation.html">Nifti IO</a>
    </li>
    <li>
      <a href="modules/reference.html#module-nilearn.datasets">Datasets</a>
    </li>
  </ul>
 </div>

  <div class="banner">
    <h1>Nilearn:</h1>
    <h2>Machine learning for Neuro-Imaging in Python</h2>
  </div>
  <div class="search_form">
    <div id="cse" style="width: 100%;"></div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function() {
      var customSearchControl = new google.search.CustomSearchControl('014136483057745874622:r-npolb1uki');
      customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
      var options = new google.search.DrawOptions();
      options.setAutoComplete(true);
      customSearchControl.draw('cse', options);
      }, true);
    </script>
  </div>
</div>



    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="decoding/index.html" title="2. Decoding and MVPA: predicting from brain images"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="user_guide.html" title="User guide: table of contents"
             accesskey="P">previous</a> |</li>
<li><a href="index.html">Nilearn Home</a> |&nbsp;</li>
<li><a href="user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="auto_examples/index.html">Examples</a> |&nbsp;</li>
<li><a href="modules/reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="AUTHORS.html">About</a>|&nbsp;</li>
<li id="navbar-ecosystem"><a href="http://www.nipy.org/">Nipy ecosystem</a></li>
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Giving credit </h4>
  <ul class="simple">
    <li><p>Please consider <a href="AUTHORS.html#citing">citing the
                    scikit-learn</a> if you use it.</p></li>
  </ul>

  <h3><a href="user_guide.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Introduction: nilearn in a nutshell</a><ul>
<li><a class="reference internal" href="#what-is-nilearn-mvpa-decoding-predictive-models-functional-connectivity">1.1. What is nilearn: MVPA, decoding, predictive models, functional connectivity</a><ul>
<li><a class="reference internal" href="#why-is-machine-learning-relevant-to-neuroimaging-a-few-examples">1.1.1. Why is machine learning relevant to NeuroImaging? A few examples!</a></li>
<li><a class="reference internal" href="#glossary-machine-learning-vocabulary">1.1.2. Glossary: machine learning vocabulary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-nilearn">1.2. Installing nilearn</a><ul>
<li><a class="reference internal" href="#installing-the-scientific-python-environment">1.2.1. Installing the scientific Python environment</a></li>
<li><a class="reference internal" href="#id1">1.2.2. Installing nilearn</a><ul>
<li><a class="reference internal" href="#testing-your-installation">1.2.2.1. Testing your installation</a></li>
<li><a class="reference internal" href="#installing-the-development-version">1.2.2.2. Installing the development version</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#python-for-neuroimaging-a-quick-start">1.3. Python for NeuroImaging, a quick start</a><ul>
<li><a class="reference internal" href="#your-first-steps-with-nilearn">1.3.1. Your first steps with nilearn</a></li>
<li><a class="reference internal" href="#scientific-computing-with-python">1.3.2. Scientific computing with Python</a><ul>
<li><a class="reference internal" href="#basic-numerics">1.3.2.1. Basic numerics</a></li>
<li><a class="reference internal" href="#scikit-learn-machine-learning-in-python">1.3.2.2. Scikit-learn: machine learning in Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#finding-help">1.3.3. Finding help</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="user_guide.html"
                        title="previous chapter">User guide: table of contents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="decoding/index.html"
                        title="next chapter">2. Decoding and MVPA: predicting from brain images</a></p>

<div class="navbar">
</div> <!-- end navbar -->

<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction-nilearn-in-a-nutshell">
<h1>1. Introduction: nilearn in a nutshell<a class="headerlink" href="#introduction-nilearn-in-a-nutshell" title="Permalink to this headline">Â¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first"><strong>Contents</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#what-is-nilearn-mvpa-decoding-predictive-models-functional-connectivity" id="id5">What is nilearn: MVPA, decoding, predictive models, functional connectivity</a></li>
<li><a class="reference internal" href="#installing-nilearn" id="id6">Installing nilearn</a></li>
<li><a class="reference internal" href="#python-for-neuroimaging-a-quick-start" id="id7">Python for NeuroImaging, a quick start</a></li>
</ul>
</div>
<div class="section" id="what-is-nilearn-mvpa-decoding-predictive-models-functional-connectivity">
<h2><a class="toc-backref" href="#id5">1.1. What is nilearn: MVPA, decoding, predictive models, functional connectivity</a><a class="headerlink" href="#what-is-nilearn-mvpa-decoding-predictive-models-functional-connectivity" title="Permalink to this headline">Â¶</a></h2>
<div class="topic">
<p class="topic-title first"><strong>Why use nilearn?</strong></p>
<p>Nilearn makes it easy to use many advanced <strong>machine learning</strong>,
<strong>pattern recognition</strong> and <strong>multivariate statistical</strong> techniques on
neuroimaging data for applications such as <strong>MVPA</strong> (Mutli-Voxel
Pattern Analysis),
<a class="reference internal" href="decoding/index.html#decoding"><span>decoding</span></a>,
<a class="reference internal" href="decoding/index.html#decoding"><span>predictive modelling</span></a>,
<a class="reference internal" href="connectivity/functional_connectomes.html#functional-connectomes"><span>functional connectivity</span></a>,
<a class="reference internal" href="connectivity/parcellating.html#parcellating-brain"><span>brain parcellations</span></a>,
<a class="reference internal" href="connectivity/functional_connectomes.html#functional-connectomes"><span>connectomes</span></a>.</p>
<p>Nilearn can readily be used on <a class="reference internal" href="decoding/decoding_tutorial.html#decoding-tutorial"><span>task fMRI</span></a>,
<a class="reference internal" href="connectivity/functional_connectomes.html#functional-connectomes"><span>resting-state</span></a>, or
<a class="reference internal" href="auto_examples/decoding/plot_oasis_vbm.html#example-decoding-plot-oasis-vbm-py"><span>VBM</span></a> data.</p>
<p>For a machine-learning expert, the value of nilearn can be seen as
domain-specific <strong>feature engineering</strong> construction, that is, shaping
neuroimaging data into a feature matrix well suited to statistical
learning, or vice versa.</p>
</div>
<div class="section" id="why-is-machine-learning-relevant-to-neuroimaging-a-few-examples">
<h3>1.1.1. Why is machine learning relevant to NeuroImaging? A few examples!<a class="headerlink" href="#why-is-machine-learning-relevant-to-neuroimaging-a-few-examples" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Diagnosis and prognosis:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Predicting a clinical score or even treatment response
from brain imaging with <a class="reference internal" href="decoding/index.html#decoding"><span>supervised
learning</span></a> e.g. <a class="reference external" href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0029482">[Mourao-Miranda 2012]</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Measuring generalization scores:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>Information mapping</strong>: using the prediction accuracy of a classifier
to characterize relationships between brain images and stimuli. (e.g.
<a class="reference internal" href="decoding/searchlight.html#searchlight"><span>searchlight</span></a>) <a class="reference external" href="http://www.pnas.org/content/103/10/3863.short">[Kriegeskorte 2005]</a></li>
<li><strong>Transfer learning</strong>: measuring how much an estimator trained on one
specific psychological process/task can predict the neural activity
underlying another specific psychological process/task
(e.g. discriminating left from
right eye movements also discriminates additions from subtractions
<a class="reference external" href="http://www.sciencemag.org/content/324/5934/1583.short">[Knops 2009]</a>)</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">High-dimensional multivariate statistics:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">From a statistical point of view, machine learning implements
statistical estimation of models with a large number of parameters.
Tricks pulled in machine learning (e.g. regularization) can
make this estimation possible despite the usually
small number of observations in the neuroimaging domain
<a class="reference external" href="http://icml.cc/discuss/2012/688.html">[Varoquaux 2012]</a>. This
usage of machine learning requires some understanding of the models.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Data mining / exploration:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">Data-driven exploration of brain images. This includes the extraction of
the major brain networks from resting-state data (&#8220;resting-state networks&#8221;)
as well as the discovery of connectionally coherent functional modules
(&#8220;connectivity-based parcellation&#8221;).
For example,
<a class="reference internal" href="connectivity/resting_state_networks.html#extracting-rsn"><span>Extracting resting-state networks with ICA</span></a> or <a class="reference internal" href="connectivity/parcellating.html#parcellating-brain"><span>Parcellating the brain in regions</span></a> with clustering.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="glossary-machine-learning-vocabulary">
<h3>1.1.2. Glossary: machine learning vocabulary<a class="headerlink" href="#glossary-machine-learning-vocabulary" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Supervised learning:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><a class="reference internal" href="decoding/index.html#decoding"><span>Supervised learning</span></a> is interested in predicting an
<strong>output variable</strong>, or <strong>target</strong>, <cite>y</cite>, from <strong>data</strong> <cite>X</cite>.
Typically, we start from labeled data (the <strong>training set</strong>). We need to
know the <cite>y</cite> for each instance of <cite>X</cite> in order to train the model. Once
learned, this model is then applied to new unlabeled data (the <strong>test set</strong>)
to predict the labels (although we actually know them). There are
essentially two possible goals:</p>
<ul class="simple">
<li>a <strong>regression</strong> problem: predicting a continuous variable, such
as participant age, from the data <cite>X</cite></li>
<li>a <strong>classification</strong> problem: predicting a binary variable that splits
the observations into two groups, such as patients versus controls</li>
</ul>
<p>In neuroimaging research, supervised learning is typically used to
derive an underlying cognitive process (e.g., emotional versus non-emotional
theory of mind), a behavioral variable (e.g., reaction time or IQ), or
diagnosis status (e.g., schizophrenia versus healthy) from brain images.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Unsupervised learning:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><a class="reference external" href="http://scikit-learn.org/stable/unsupervised_learning.html">Unsupervised learning</a> is
concerned with data <cite>X</cite> without any labels. It analyzes the structure
of a dataset to find coherent underlying structure,
for instance using <strong>clustering</strong>, or to extract latent
factors, for instance using <strong>independent components analysis (ICA)</strong>.</p>
<p class="last">In neuroimaging research, it is typically used to create functional and
anatomical brain atlases by clustering based on connectivity or to
extract the main brain networks from resting-state correlations. An
important option of future research will be the identification of
potential neurobiological subgroups in psychiatric and neurobiological
disorders.</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="installing-nilearn">
<span id="installation"></span><h2><a class="toc-backref" href="#id6">1.2. Installing nilearn</a><a class="headerlink" href="#installing-nilearn" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="installing-the-scientific-python-environment">
<h3>1.2.1. Installing the scientific Python environment<a class="headerlink" href="#installing-the-scientific-python-environment" title="Permalink to this headline">Â¶</a></h3>
<p>We recommend that you <strong>install a complete scientific Python distribution</strong>,
rather than downloading the bare Python.
Given the richness of the scientific Python tool stack, installing
the various required packages may be time-consuming and error
prone.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Windows and MacOSX:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">We suggest you to install 64 bit <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a>.</p>
<p><a class="reference external" href="https://store.enthought.com/">Enthought Canopy</a>, <a class="reference external" href="http://code.google.com/p/pythonxy/">PythonXY</a> are
alternative options.
Enthought Canopy Express (download the free version) should provide
the entirety of required packages.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Linux:</th><td class="field-body"><p class="first">While the <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> distribution is available for Linux, most recent linux
distributions come with all packages that are needed for nilearn.
Kindly ask your system administrator to install the following packages
using the distribution package manager:</p>
<blockquote class="last">
<div><ul class="simple">
<li>scikit-learn (sometimes called <cite>sklearn</cite>, or <cite>python-sklearn</cite>)</li>
<li>matplotlib (sometimes called <cite>python-matplotlib</cite>)</li>
<li>ipython</li>
<li>nibabel (sometimes called <cite>python-nibabel</cite>)</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h3>1.2.2. Installing nilearn<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p>The simplest way to install nilearn is to run the following command in
a command prompt:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install -U --user nilearn
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that this is a &#8220;shell&#8221; command, not a Python command. Concretely,
Mac users need to type this in the &#8220;Terminal&#8221;, while Windows users
need to type it in command line of cmd.exe.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="testing-your-installation">
<span id="testing-installation"></span><h4>1.2.2.1. Testing your installation<a class="headerlink" href="#testing-your-installation" title="Permalink to this headline">Â¶</a></h4>
<p>To check whether everything is set up correctly, open IPython (an widely
used enhanced version of the Python prompt, cf. below) and type
in the following line:</p>
<div class="highlight-python"><div class="highlight"><pre>In [1]: import nilearn
</pre></div>
</div>
<p>If no error occurs, you have installed nilearn correctly.</p>
</div>
<div class="section" id="installing-the-development-version">
<h4>1.2.2.2. Installing the development version<a class="headerlink" href="#installing-the-development-version" title="Permalink to this headline">Â¶</a></h4>
<p><strong>Downloading</strong> If you really want the latest nilearn version, you can use
git as an alternative to using pip.</p>
<ul>
<li><p class="first"><strong>Under Windows or Max OSX</strong>, simply go to
<a class="reference external" href="https://github.com/nilearn/nilearn">https://github.com/nilearn/nilearn</a> and click on the &#8216;Clone in Desktop&#8217;
button on the lower right of the webpage. This will install a program
that will automatically download nilearn and that you can use to update
nilearn.</p>
</li>
<li><p class="first"><strong>Under Linux</strong>, run the following command (as a shell command, not a
Python command):</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/nilearn/nilearn.git
</pre></div>
</div>
</li>
</ul>
<p>In the future, you can readily update your copy of nilearn
by executing &#8220;git pull&#8221; in
the nilearn root directory (as a shell command).</p>
<p>If you really do not want to use git, you may still download the latest
development snapshot from the following link (unziping required):
<a class="reference external" href="https://github.com/nilearn/nilearn/archive/master.zip">https://github.com/nilearn/nilearn/archive/master.zip</a></p>
<p><strong>Installing</strong> In the <code class="docutils literal"><span class="pre">nilearn</span></code> directory created by the previous steps, run
(again, as a shell command):</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py install --user
</pre></div>
</div>
<p>To make sure that the installation was successful, just follow the
same steps as in <a class="reference internal" href="#testing-installation"><span>Testing your installation</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="python-for-neuroimaging-a-quick-start">
<span id="quick-start"></span><h2><a class="toc-backref" href="#id7">1.3. Python for NeuroImaging, a quick start</a><a class="headerlink" href="#python-for-neuroimaging-a-quick-start" title="Permalink to this headline">Â¶</a></h2>
<p>If you don&#8217;t know Python, <strong>Don&#8217;t panic. Python is easy</strong>. It is important
to realize that most things you will do in nilearn require only a few or a
few dozen lines of Python code.
Here, we give
the basics to help you get started. For a very quick start into the programming
language, you can <a class="reference external" href="http://www.learnpython.org/">learn it online</a>.
For a full-blown introduction to
using Python for science, see the <a class="reference external" href="http://scipy-lectures.github.io/">scipy lecture notes</a>.</p>
<p>We will be using <a class="reference external" href="http://ipython.org">IPython</a>, which provides an
interactive scientific environment that facilitates (e.g.,
interactive debugging) and improves (e.g., printing of large matrices)
many everyday data-manipulation steps. Start it by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ipython</span> <span class="o">--</span><span class="n">matplotlib</span>
</pre></div>
</div>
<p>This will open an interactive prompt:</p>
<div class="highlight-python"><div class="highlight"><pre>IPython ?.?.? -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython&#39;s features.
%quickref -&gt; Quick reference.
help      -&gt; Python&#39;s own help system.
object?   -&gt; Details about &#39;object&#39;, use &#39;object??&#39; for extra details.

In [1]: 1 + 2 * 3
Out[1]: 7
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">--matplotlib</span></code> flag, which configures matplotlib for
interactive use inside IPython, is available for IPython versions
from 1.0 onwards. If you are using versions older than this,
e.g. 0.13, you can use the <code class="docutils literal"><span class="pre">--pylab</span></code> flag instead.</p>
</div>
<div class="topic">
<p class="topic-title first"><cite>&gt;&gt;&gt;</cite> <strong>Prompt</strong></p>
<p>Below we&#8217;ll be using <cite>&gt;&gt;&gt;</cite> to indicate input lines. If you wish to copy and
paste these input lines directly into <em>IPython</em>, click on the <cite>&gt;&gt;&gt;</cite> located
at the top right of the code block to toggle these prompt signs</p>
</div>
<div class="section" id="your-first-steps-with-nilearn">
<h3>1.3.1. Your first steps with nilearn<a class="headerlink" href="#your-first-steps-with-nilearn" title="Permalink to this headline">Â¶</a></h3>
<p>First things first, nilearn does not have a graphical user interface.
But you will soon realize that you don&#8217;t really need one.
It is typically used interactively in IPython or in an automated way by Python
code.
Most importantly, nilearn functions that process neuroimaging data accept
either a filename (i.e., a string variable) or a <a class="reference external" href="http://nipy.org/nibabel/nibabel_images.html">NiftiImage object</a>. We call the latter
&#8220;niimg-like&#8221;.</p>
<p>Suppose for instance that you have a Tmap image saved in the Nifti file
&#8220;t_map000.nii&#8221; in the directory &#8220;/home/user&#8221;. To visualize that image, you will
first have to import the <a class="reference internal" href="manipulating_visualizing/plotting.html#plotting"><span>plotting</span></a> functionality by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nilearn</span> <span class="kn">import</span> <span class="n">plotting</span>
</pre></div>
</div>
<p>Then you can call the function that creates a &#8220;glass brain&#8221; by giving it
the file name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">plotting</span><span class="o">.</span><span class="n">plot_glass_brain</span><span class="p">(</span><span class="s">&quot;/home/user/t_map000.nii&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference external image-reference" href="auto_examples/manipulating_visualizing/plot_demo_glass_brain.html"><img alt="_images/plot_demo_glass_brain_001.png" class="align-center" src="_images/plot_demo_glass_brain_001.png" style="width: 396.0px; height: 156.0px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are many other plotting functions. Take your time to have a look
at the <a class="reference internal" href="manipulating_visualizing/plotting.html#plotting"><span>different options</span></a>.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>For simple functions/operations on images, many functions exist, such as in
the <a class="reference internal" href="modules/reference.html#module-nilearn.image" title="nilearn.image"><code class="xref py py-mod docutils literal"><span class="pre">nilearn.image</span></code></a> module for image manipulation, e.g.
<a class="reference internal" href="modules/generated/nilearn.image.smooth_img.html#nilearn.image.smooth_img" title="nilearn.image.smooth_img"><code class="xref py py-func docutils literal"><span class="pre">image.smooth_img</span></code></a> for smoothing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nilearn</span> <span class="kn">import</span> <span class="n">image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">smoothed_img</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">smooth_img</span><span class="p">(</span><span class="s">&quot;/home/user/t_map000.nii&quot;</span><span class="p">,</span> <span class="n">fwhm</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>The returned value <cite>smoothed_img</cite> is a <a class="reference external" href="http://nipy.org/nibabel/nibabel_images.html">NiftiImage object</a>. It can either be passed
to other nilearn functions operating on niimgs (neuroimaging images) or
saved to disk with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">smoothed_img</span><span class="o">.</span><span class="n">to_filename</span><span class="p">(</span><span class="s">&quot;/home/user/t_map000_smoothed.nii&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, nilearn deals with Nifti images that come in two flavors: 3D
images, which represent a brain volume, and 4D images, which represent a
series of brain volumes. To extract the n-th 3D image from a 4D image, you can
use the <a class="reference internal" href="modules/generated/nilearn.image.index_img.html#nilearn.image.index_img" title="nilearn.image.index_img"><code class="xref py py-func docutils literal"><span class="pre">image.index_img</span></code></a> function (keep in mind that array indexing
always starts at 0 in the Python language):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">first_volume</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">index_img</span><span class="p">(</span><span class="s">&quot;/home/user/fmri_volumes.nii&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>To loop over each individual volume of a 4D image, use <a class="reference internal" href="modules/generated/nilearn.image.iter_img.html#nilearn.image.iter_img" title="nilearn.image.iter_img"><code class="xref py py-func docutils literal"><span class="pre">image.iter_img</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">iter_img</span><span class="p">(</span><span class="s">&quot;/home/user/fmri_volumes.nii&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">smoothed_img</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">smooth_img</span><span class="p">(</span><span class="n">volume</span><span class="p">,</span> <span class="n">fwhm</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="green topic">
<p class="topic-title first"><strong>Exercise: varying the amount of smoothing</strong></p>
<p>Want to sharpen your skills with nilearn?
Compute the mean EPI for first subject of the ADHD
dataset downloaded with <a class="reference internal" href="modules/generated/nilearn.datasets.fetch_adhd.html#nilearn.datasets.fetch_adhd" title="nilearn.datasets.fetch_adhd"><code class="xref py py-func docutils literal"><span class="pre">nilearn.datasets.fetch_adhd</span></code></a> and
smooth it with an FWHM varying from 0mm to 20mm in increments of 5mm</p>
<p><strong>Hints:</strong></p>
<blockquote>
<div><ul class="simple">
<li>Inspect the &#8216;.keys()&#8217; of the object returned by
<a class="reference internal" href="modules/generated/nilearn.datasets.fetch_adhd.html#nilearn.datasets.fetch_adhd" title="nilearn.datasets.fetch_adhd"><code class="xref py py-func docutils literal"><span class="pre">nilearn.datasets.fetch_adhd</span></code></a></li>
<li>Look at the &#8220;reference&#8221; section of the documentation: there is a
function to compute the mean of a 4D image</li>
<li>To perform a for loop in Python, you can use the &#8220;range&#8221; function</li>
<li>The solution can be found <a class="reference internal" href="auto_examples/manipulating_visualizing/plot_smooth_mean_image.html#example-manipulating-visualizing-plot-smooth-mean-image-py"><span>here</span></a></li>
</ul>
</div></blockquote>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<p>Now, if you want out-of-the-box methods to process neuroimaging data, jump
directly to the section you need:</p>
<ul class="simple">
<li><a class="reference internal" href="decoding/index.html#decoding"><span>Decoding and MVPA: predicting from brain images</span></a></li>
<li><a class="reference internal" href="connectivity/index.html#functional-connectivity"><span>Functional connectivity and resting state</span></a></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="scientific-computing-with-python">
<h3>1.3.2. Scientific computing with Python<a class="headerlink" href="#scientific-computing-with-python" title="Permalink to this headline">Â¶</a></h3>
<p>In case you plan to become a casual nilearn user, note that you will not need
to deal with number and array manipulation directly in Python.
However, if you plan to go beyond that, here are a few pointers.</p>
<div class="section" id="basic-numerics">
<h4>1.3.2.1. Basic numerics<a class="headerlink" href="#basic-numerics" title="Permalink to this headline">Â¶</a></h4>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Numerical arrays:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">The numerical data (e.g. matrices) are stored in numpy arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>  <span class="c"># 2000 points between 1 and 10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">array([  1.        ,   1.00450225,   1.0090045 , ...,   9.9909955 ,</span>
<span class="go">         9.99549775,  10.        ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">/</span> <span class="mi">2</span>
<span class="go">array([ 0.5       ,  0.50225113,  0.50450225, ...,  4.99549775,</span>
<span class="go">        4.99774887,  5.        ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c"># Operations on arrays are defined in the numpy module</span>
<span class="go">array([ 0.54030231,  0.53650833,  0.53270348, ..., -0.84393609,</span>
<span class="go">       -0.84151234, -0.83907153])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="c"># In Python indexing is done with [] and starts at zero</span>
<span class="go">array([ 1.        ,  1.00450225,  1.0090045 ])</span>
</pre></div>
</div>
<p><a class="reference external" href="http://scipy-lectures.github.io/intro/numpy/index.html">More documentation ...</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Plotting and figures:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><div class="first figure align-right">
<a class="reference external image-reference" href="auto_examples/plot_python_101.html"><img alt="_images/plot_python_101_001.png" src="_images/plot_python_101_001.png" style="width: 240.0px; height: 180.0px;" /></a>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>       
<span class="go">[&lt;matplotlib.lines.Line2D object at ...&gt;]</span>
</pre></div>
</div>
<p><a class="reference external" href="http://scipy-lectures.github.io/intro/matplotlib/matplotlib.html">More documentation ...</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Image processing:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">ndimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_smooth</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">gaussian_filter</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="http://scipy-lectures.github.io/advanced/image_processing/index.html">More documentation ...</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Signal processing:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_detrended</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">detrend</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="http://scipy-lectures.github.io/intro/scipy.html#signal-processing-scipy-signal">More documentation ...</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Much more:</th><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first">Simple statistics:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
</pre></div>
</div>
</li>
</ul>
</td><td><ul>
<li><p class="first">Linear algebra:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">linalg</span>
</pre></div>
</div>
</li>
</ul>
</td></tr></table>
<p class="last"><a class="reference external" href="http://scipy-lectures.github.io/intro/scipy.html">More documentation...</a></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scikit-learn-machine-learning-in-python">
<h4>1.3.2.2. Scikit-learn: machine learning in Python<a class="headerlink" href="#scikit-learn-machine-learning-in-python" title="Permalink to this headline">Â¶</a></h4>
<div class="topic">
<p class="topic-title first"><strong>What is scikit-learn?</strong></p>
<p><a class="reference external" href="http://scikit-learn.org">Scikit-learn</a> is a Python library for machine
learning. Its strong points are:</p>
<ul class="simple">
<li>Easy to use and well documented</li>
<li>Computationally efficient</li>
<li>Provides a wide variety of standard machine learning methods for non-experts</li>
</ul>
</div>
<p>The core concept in <a class="reference external" href="http://scikit-learn.org">scikit-learn</a> is the
estimator object, for instance an SVC (<a class="reference external" href="http://scikit-learn.org/stable/modules/svm.html">support vector classifier</a>).
It is first created with the relevant parameters:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svc</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
</pre></div>
</div>
<p>These parameters are detailed in the documentation of
the object: in IPython you can do:</p>
<div class="highlight-python"><div class="highlight"><pre>In [3]: SVC?
...
Parameters
----------
C : float or None, optional (default=None)
    Penalty parameter C of the error term. If None then C is set
    to n_samples.

kernel : string, optional (default=&#39;rbf&#39;)
    Specifies the kernel type to be used in the algorithm.
    It must be one of &#39;linear&#39;, &#39;poly&#39;, &#39;rbf&#39;, &#39;sigmoid&#39;, &#39;precomputed&#39;.
    If none is given, &#39;rbf&#39; will be used.
...
</pre></div>
</div>
<p>Once the object is created, you can fit it on data. For instance, here we
use a hand-written digits dataset, which comes with scikit-learn:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">digits</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_digits</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">digits</span><span class="o">.</span><span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">digits</span><span class="o">.</span><span class="n">target</span>
</pre></div>
</div>
<p>Let&#8217;s use all but the last 10 samples to train the SVC:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">svc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="n">labels</span><span class="p">[:</span><span class="o">-</span><span class="mi">10</span><span class="p">])</span>   
<span class="go">SVC(C=1.0, ...)</span>
</pre></div>
</div>
<p>and try predicting the labels on the left-out data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">svc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:])</span>
<span class="go">array([5, 4, 8, 8, 4, 9, 0, 8, 9, 8])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span>    <span class="c"># The actual labels</span>
<span class="go">array([5, 4, 8, 8, 4, 9, 0, 8, 9, 8])</span>
</pre></div>
</div>
<p>To find out more, try the <a class="reference external" href="http://scikit-learn.org/stable/tutorial/index.html">scikit-learn tutorials</a>.</p>
</div>
</div>
<div class="section" id="finding-help">
<h3>1.3.3. Finding help<a class="headerlink" href="#finding-help" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Reference material:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li>A quick and gentle introduction to scientific computing with Python can
be found in the
<a class="reference external" href="http://scipy-lectures.github.io/">scipy lecture notes</a>.</li>
<li>The documentation of scikit-learn explains each method with tips on
practical use and examples:
<a class="reference external" href="http://scikit-learn.org/">http://scikit-learn.org/</a>.
While not specific to neuroimaging, it is often a recommended read.
Be careful to consult the documentation of the scikit-learn version
that you are using.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Mailing lists and forums:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li>Don&#8217;t hesitate to ask questions about nilearn on <a class="reference external" href="https://neurostars.org/t/nilearn/">neurostars</a>.</li>
<li>You can find help with neuroimaging in Python (file I/O,
neuroimaging-specific questions) via the nipy user group:
<a class="reference external" href="https://groups.google.com/forum/?fromgroups#!forum/nipy-user">https://groups.google.com/forum/?fromgroups#!forum/nipy-user</a></li>
<li>For machine-learning and scikit-learn questions, expertise can be
found on the scikit-learn mailing list:
<a class="reference external" href="https://lists.sourceforge.net/lists/listinfo/scikit-learn-general">https://lists.sourceforge.net/lists/listinfo/scikit-learn-general</a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="decoding/index.html" title="2. Decoding and MVPA: predicting from brain images"
             >next</a> |</li>
        <li class="right" >
          <a href="user_guide.html" title="User guide: table of contents"
             >previous</a> |</li>
<li><a href="index.html">Nilearn Home</a> |&nbsp;</li>
<li><a href="user_guide.html">User Guide</a> |&nbsp;</li>
<li><a href="auto_examples/index.html">Examples</a> |&nbsp;</li>
<li><a href="modules/reference.html">Reference</a> |&nbsp;</li>
<li id="navbar-about"><a href="AUTHORS.html">About</a>|&nbsp;</li>
<li id="navbar-ecosystem"><a href="http://www.nipy.org/">Nipy ecosystem</a></li>
 
      </ul>
    </div>
    <div class="footer">
            &copy; The nilearn developers 2010-2015.
          Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
        <span style="padding-left: 5ex;">
          <a href="_sources/introduction.txt"
        	 rel="nofollow">Show this page source</a>
        </span>
    </div>
  </body>
</html>